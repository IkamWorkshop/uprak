import tkinter as tk
from tkinter import messagebox
#kesempatan login
kesempatan = 3
#prosedur login
def login():
    global kesempatan
    
    usn = userEntry.get()
    pw = passEntry.get()
    
    if not usn or not pw:
        messagebox.showwarning("Error" , "Tolong isi username dan password!")
        return
    
    if usn == "icham" and pw == "bootcampX":
        messagebox.showinfo("Login" , "berhasil selamat datang")
        frameLogin.destroy()
        buka_kasir()
    else:
        kesempatan -= 1
        messagebox.showwarning("Error", f"Username atau Password salah!\nkesempatan tersisa: {kesempatan}")
        if kesempatan == 0:
            messagebox.showerror("Error" , "Kesempatan habis!")
            frameLogin.destroy()
# prosedur buka kasir
def buka_kasir():
    frameKasir = tk.Tk()
    frameKasir.geometry("400x350")
    frameKasir.title("Invoice kasir")
    
    def proses():
        try:
            nama = namaEntry.get()
            barang = barangEntry.get()
            jumlah = int(jumlahEntry.get())
            harga = int(hargaEntry.get())
            uang = int(uangEntry.get())
            
            total = jumlah * harga
            kembalian = uang - total
            
            if kembalian < 0:
                messagebox.showwarning("Error", "uang tidak cukup!")
                return
            
            messagebox.showinfo("Struk pembayaran",
                f"Nama Pembeli: {nama}\n"
                f"Nama Barang: {barang}\n"
                f"Jumlah: {jumlah}\n"
                f"Harga Satuan: Rp {harga:,}\n"
                f"Total: Rp {total:,}\n"
                f"Uang: Rp {uang:,}\n"
                f"Kembalian: Rp {kembalian:,}")
        except ValueError:
            messagebox.showwarning("Error" , "masukkan angka yang valid!")
    
    labels = ["Nama Pembeli:", "Nama Barang:", "Jumlah:", "Harga Satuan:", "Uang Pembeli:"]
    entries = []
    
    for i, label_text in enumerate(labels):
        tk.Label(frameKasir, text=label_text).grid(row=i*2, column=0, sticky="w", padx=10, pady=5)
        entry = tk.Entry(frameKasir, width=30)
        entry.grid(row=i*2+1, column=0, padx=10, pady=5)
        entries.append(entry)
    
    namaEntry, barangEntry, jumlahEntry, hargaEntry, uangEntry = entries
    
    tk.Button(frameKasir, text="Proses", command=proses, width=20).grid(row=10, column=0, pady=20)
    
    frameKasir.mainloop()
# GUI Login
frameLogin = tk.Tk()
frameLogin.geometry("300x150")
frameLogin.title("Login")

tk.Label(frameLogin, text="Username:").grid(row=0, column=0, padx=10, pady=10, sticky="e")
userEntry = tk.Entry(frameLogin, width=20)
userEntry.grid(row=0, column=1, pady=10)

tk.Label(frameLogin, text="Password:").grid(row=1, column=0, padx=10, pady=10, sticky="e")
passEntry = tk.Entry(frameLogin, show="*", width=20)
passEntry.grid(row=1, column=1, pady=10)

tk.Button(frameLogin, text="Login", command=login, width=15).grid(row=2, column=0, columnspan=2, pady=10)

frameLogin.mainloop()
